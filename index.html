<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rate My Dump</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: 'Courier New', monospace;
      background-image: url('https://i.imgur.com/RM2Wt9P.jpg'); /* clogged toilet + angry janitor */
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      margin: 0;
      padding: 0;
      color: #f5dd99;
    }
    .container {
      max-width: 900px;
      margin: 2rem auto;
      background: rgba(0, 0, 0, 0.85);
      padding: 2rem;
      border: 2px solid #865d1c;
      box-shadow: 0 0 15px #000;
      border-radius: 12px;
    }
    h1 {
      font-size: 3rem;
      color: #ffd700;
      text-shadow: 2px 2px 2px #000;
      text-align: center;
    }
    h2 {
      color: #f2cd88;
      margin-top: 2rem;
    }
    .warning-banner {
      background: #ff0000;
      color: white;
      padding: 0.3rem;
      font-weight: bold;
      text-align: center;
      animation: flash 0.5s infinite alternate;
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }
    @keyframes flash {
      0% { background-color: #ff0000; }
      100% { background-color: #ff9900; }
    }
    img {
      width: 100%;
      border: 3px dashed #ffcc00;
      margin-bottom: 1rem;
      display: block;
      max-height: 300px;
      object-fit: contain;
    }
    button {
      background: #b88900;
      color: black;
      padding: 0.5rem 1rem;
      margin: 0.5rem 0.25rem 0.5rem 0;
      border: none;
      cursor: pointer;
      font-size: 1.1rem;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background: #d9af00;
    }
    input[type="text"], input[type="number"], textarea {
      width: 100%;
      padding: 0.5rem;
      margin: 0.25rem 0 0.75rem 0;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
      font-family: 'Courier New', monospace;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
      min-height: 60px;
    }
    .leaderboard, .vote-output, .popup, .stories-section, .calculator, .helpline {
      background: #2d1f0f;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 8px;
      color: #f2cd88;
      box-sizing: border-box;
    }
    .popup {
      border: 2px dashed #ffdd33;
      text-align: center;
      font-size: 1.1rem;
    }
    .helpline {
      margin-top: 2rem;
      font-size: 1.2rem;
      background: #111;
      border: 2px solid red;
      padding: 1rem;
      color: #f77;
      text-align: center;
    }
    .story {
      border: 1px solid #a57c00;
      padding: 0.75rem;
      margin-bottom: 1rem;
      border-radius: 8px;
      background: #3c2f10;
    }
    .story img {
      margin-top: 0.5rem;
      max-height: 180px;
    }
    .comment-section {
      margin-top: 0.75rem;
      padding-left: 1rem;
      font-size: 0.9rem;
      border-left: 2px solid #a57c00;
    }
    .comment-input {
      margin-top: 0.5rem;
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .comment-input input {
      flex-grow: 1;
      font-size: 1rem;
    }
    .comment-btn {
      background: #a57c00;
      color: black;
      padding: 0.3rem 0.7rem;
      border-radius: 5px;
      cursor: pointer;
      border: none;
    }
    #snakeCanvas {
      background: #110a00;
      display: block;
      margin: 1rem auto;
      border: 3px solid #b88900;
      border-radius: 10px;
      touch-action: none;
    }
    #snakeControls {
      text-align: center;
      margin-bottom: 2rem;
    }
    #snakeScore {
      font-size: 1.2rem;
      margin-top: 0.5rem;
      color: #f2cd88;
      font-weight: bold;
    }
    /* Responsive tweaks */
    @media (max-width: 700px) {
      .container {
        margin: 1rem;
        padding: 1rem;
      }
      img {
        max-height: 200px;
      }
      #snakeCanvas {
        width: 280px;
        height: 280px;
      }
    }
  </style>
</head>
<body>
  <div class="warning-banner">üî• Wanna Check out Hot New Dumps In Your Area? Call that Local Med Doc Steaming Sammy üî•</div>

  <div class="container">
    <h1>Rate My Dump</h1>

    <p><input type="checkbox" id="terms" /> I agree to not upload pictures of my dinkie doos</p>
    <button onclick="enterSite()">Let Me In</button>

    <div id="mainContent" style="display:none;">

      <!-- Random Dump of the Day -->
      <h2>üç© Random Dump of the Day</h2>
      <img src="https://i.imgur.com/z2Rbzft.jpg" alt="Daily Dump" />
      <p><i>"My girlfriend had to pull this one out with salad tongs. It had joints."</i></p>

      <div>
        <button onclick="rate('up')">üëç Vote Up</button>
        <button onclick="rate('down')">üëé Vote Down</button>
        <p class="vote-output" id="voteMsg"></p>
      </div>

      <div class="leaderboard">
        <h3>üßª Top Rated Dumps:</h3>
        <ul>
          <li>"I let one go and it pierced my knickers"</li>
          <li>"Something died that made me gape"</li>
          <li>"Had to cut it and remove with a cup."</li>
          <li>"I have birthed something that should have been aborted."</li>
        </ul>
      </div>

      <div class="helpline">
        üö® Need Help? Call the 24/7 Poop Sling Hotline: <strong>1-800-POO-SAVE</strong><br/>
        Rent-a-Rig. Emergency Bowl Support. Emotional Cleanups.
      </div>

      <div class="popup" id="spamPopup" style="display:none;">
        üí© Wanna meet Single Dads? DilfTurds.net
      </div>

      <!-- Poop Calculator -->
      <div class="calculator">
        <h2>üí© Poop Size Calculator</h2>
        <p>Calculate the size of your dump and see what toilet bowl you need!</p>

        <label for="length">Length (inches):</label>
        <input type="number" id="length" min="1" max="30" value="5" />

        <label for="width">Width (inches):</label>
        <input type="number" id="width" min="1" max="15" value="3" />

        <label for="height">Height (inches):</label>
        <input type="number" id="height" min="1" max="15" value="2" />

        <label for="bowlShape">Toilet Bowl Shape:</label>
        <select id="bowlShape">
          <option value="round">Round (12 inch diameter)</option>
          <option value="elongated">Elongated (18 inch diameter)</option>
          <option value="giant">Giant (24 inch diameter)</option>
        </select>

        <button onclick="calculatePoop()">Calculate Bowl Fit</button>
        <p id="calcResult"></p>
      </div>

      <!-- Submit Poop Story -->
      <div class="stories-section">
        <h2>üí© Submit Your Funny Dump Story</h2>
        <form id="storyForm">
          <label for="storyText">Story:</label>
          <textarea id="storyText" placeholder="Tell us about your epic dump..." required></textarea>

          <label for="storyImage">Upload an Image (optional):</label>
          <input type="file" id="storyImage" accept="image/*" />

          <button type="submit">Submit Story</button>
        </form>
      </div>

      <!-- Stories List -->
      <div class="stories-section" id="storiesList">
        <h2>üìú User Dump Stories</h2>
        <!-- User stories will appear here -->
      </div>

      <!-- Snake Game -->
      <div>
        <h2>üêç Play Poop Snake Game</h2>
        <div id="snakeControls">
          <button onclick="startGame()">Start Game</button>
          <p id="snakeScore">Score: 0</p>
          <small>Use arrow keys or swipe to control.</small>
        </div>
        <canvas id="snakeCanvas" width="320" height="320" tabindex="0"></canvas>
      </div>
    </div>
  </div>

<script>
  // Voting messages
  const voteUps = [
    "Looked like a lava lamp exploded.",
    "Split the toilet seat. We had to move.",
    "A steaming spiral of shame and pride.",
    "It growled at me. We made eye contact.",
    "Used a whole roll. Still wasn't clean."
  ];
  const voteDowns = [
    "Limp and lifeless. Like a deflated balloon.",
    "Wet fart energy. Too soft to rate.",
    "Looked like pudding. Felt like sin.",
    "I threw the whole toilet out.",
    "Couldn't flush. Had to baptize it instead."
  ];

  // Global stories array
  let stories = [];
  let storyIdCounter = 0;

  // Enter site function
  function enterSite() {
    if (!document.getElementById('terms').checked) {
      alert("Please agree not to upload dinkie doos.");
      return;
    }
    document.getElementById('mainContent').style.display = 'block';
    setInterval(showPopup, 10000);
  }

  // Voting function
  function rate(dir) {
    const msg = dir === 'up'
      ? voteUps[Math.floor(Math.random() * voteUps.length)]
      : voteDowns[Math.floor(Math.random() * voteDowns.length)];
    document.getElementById('voteMsg').innerText = msg;
  }

  // Popup function
  function showPopup() {
    const popup = document.getElementById('spamPopup');
    popup.style.display = 'block';
    setTimeout(() => { popup.style.display = 'none'; }, 6000);
  }

  // Poop calculator logic
  function calculatePoop() {
    const length = parseFloat(document.getElementById('length').value);
    const width = parseFloat(document.getElementById('width').value);
    const height = parseFloat(document.getElementById('height').value);
    const bowlShape = document.getElementById('bowlShape').value;

    if (isNaN(length) || isNaN(width) || isNaN(height)) {
      alert("Please enter valid numbers for all dimensions.");
      return;
    }

    // Approximate bowl diameter based on shape
    let bowlDiameter = 12; // round default
    if (bowlShape === 'elongated') bowlDiameter = 18;
    else if (bowlShape === 'giant') bowlDiameter = 24;

    // Simplified: compare length and width with bowl size
    const fitsLength = length <= bowlDiameter;
    const fitsWidth = width <= bowlDiameter;

    let result = '';
    if (fitsLength && fitsWidth) {
      result = "Good news! Your dump fits perfectly in this toilet bowl.";
    } else {
      result = "Uh-oh, your dump might be too big for this toilet bowl! Consider a bigger one.";
    }

    document.getElementById('calcResult').innerText = result;
  }

  // Story submission and display logic
  const storyForm = document.getElementById('storyForm');
  const storiesList = document.getElementById('storiesList');

  storyForm.addEventListener('submit', event => {
    event.preventDefault();

    const text = document.getElementById('storyText').value.trim();
    const fileInput = document.getElementById('storyImage');
    const file = fileInput.files[0];

    if (!text) {
      alert("Please enter a story.");
      return;
    }

    if (file && !file.type.startsWith('image/')) {
      alert("Only image files are allowed for upload.");
      return;
    }

    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        addStory(text, e.target.result);
        storyForm.reset();
      };
      reader.readAsDataURL(file);
    } else {
      addStory(text, null);
      storyForm.reset();
    }
  });

  function addStory(text, imageData) {
    const story = {
      id: storyIdCounter++,
      text,
      imageData,
      comments: []
    };
    stories.unshift(story); // newest on top
    renderStories();
  }

  function renderStories() {
    storiesList.innerHTML = '<h2>üìú User Dump Stories</h2>';
    stories.forEach(story => {
      const storyDiv = document.createElement('div');
      storyDiv.classList.add('story');

      const storyText = document.createElement('p');
      storyText.textContent = story.text;
      storyDiv.appendChild(storyText);

      if (story.imageData) {
        const img = document.createElement('img');
        img.src = story.imageData;
        img.alt = "User submitted dump pic";
        storyDiv.appendChild(img);
      }

      // Comments
      const commentsSection = document.createElement('div');
      commentsSection.classList.add('comment-section');

      story.comments.forEach(comment => {
        const commentP = document.createElement('p');
        commentP.textContent = comment;
        commentsSection.appendChild(commentP);
      });

      // Add comment input and button
      const commentInput = document.createElement('input');
      commentInput.type = 'text';
      commentInput.placeholder = 'Add a comment...';
      commentInput.classList.add('comment-input');

      const commentBtn = document.createElement('button');
      commentBtn.textContent = 'Comment';
      commentBtn.classList.add('comment-btn');
      commentBtn.onclick = () => {
        const commentText = commentInput.value.trim();
        if (commentText) {
          story.comments.push(commentText);
          commentInput.value = '';
          renderStories();
        }
      };

      commentsSection.appendChild(commentInput);
      commentsSection.appendChild(commentBtn);

      storyDiv.appendChild(commentsSection);

      storiesList.appendChild(storyDiv);
    });
  }

  // Snake Game Code

  const canvas = document.getElementById('snakeCanvas');
  const ctx = canvas.getContext('2d');

  const gridSize = 20; // 20x20 grid on 320x320 canvas
  const tileCount = canvas.width / gridSize;

  let snake = [];
  let direction = 'right';
  let food = {};
  let score = 0;
  let gameRunning = false;
  let gameInterval = null;

  // Initialize snake at start
  function initSnake() {
    snake = [
      {x: 8, y: 10},
      {x: 7, y: 10},
      {x: 6, y: 10},
    ];
    direction = 'right';
    score = 0;
    updateScore();
  }

  function placeFood() {
    food.x = Math.floor(Math.random() * tileCount);
    food.y = Math.floor(Math.random() * tileCount);
    // Make sure food is not on snake
    while (snake.some(s => s.x === food.x && s.y === food.y)) {
      food.x = Math.floor(Math.random() * tileCount);
      food.y = Math.floor(Math.random() * tileCount);
    }
  }

  function drawGame() {
    // Clear background
    ctx.fillStyle = '#110a00';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Draw snake
    ctx.fillStyle = '#bb8800';
    snake.forEach((segment, index) => {
      ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);
      // Head glow
      if (index === 0) {
        ctx.strokeStyle = '#ffcc00';
        ctx.lineWidth = 2;
        ctx.strokeRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);
      }
    });

    // Draw food (poop)
    ctx.fillStyle = '#663300';
    ctx.beginPath();
    const centerX = food.x * gridSize + gridSize / 2;
    const centerY = food.y * gridSize + gridSize / 2;
    ctx.arc(centerX, centerY, gridSize / 3, 0, Math.PI * 2);
    ctx.fill();
    // Add swirl to poop
    ctx.strokeStyle = '#a05200';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(centerX - 6, center
